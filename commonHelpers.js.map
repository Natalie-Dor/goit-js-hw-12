{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function getImages(search, currentPage) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const url = `${BASE_URL}${END_POINT}`;\n  const params = {\n    key: '43209712-864cbe761aaf2bd904c3cc70a',\n    q: search,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n  };\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","function imgTemplate(data) {\n  const {\n    id,\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = data;\n  return `<li class=\"gallery-item data-id=\"${id}\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n          loading=\"lazy\"\n            class=\"gallery-image\"\n            width=\"360\"\n            height=\"200\"\n            src=\"${webformatURL}\"\n            data-source=\"${largeImageURL}\"\n            alt=\"${tags}\"\n          />\n          <ul class=\"gallery-description\">\n            <li class=\"gallery-description-item\"><span class=\"gallery-description-span\">Likes</span>${likes}</li>\n            <li class=\"gallery-description-item\"><span class=\"gallery-description-span\">Views</span>${views}</li>\n            <li class=\"gallery-description-item\"><span class=\"gallery-description-span\">Comments</span>${comments}</li>\n            <li class=\"gallery-description-item\"><span class=\"gallery-description-span\">Downloads</span>${downloads}</li>\n          </ul>\n        </a>\n      </li>`;\n}\n// =========================================\nexport function imagesTemplate(arr) {\n  return arr.map(imgTemplate).join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages } from './js/pixabay-api';\nimport { imagesTemplate } from './js/render-functions';\nimport axios from 'axios';\n// ============================================\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nconst refs = {\n  formEl: document.querySelector('.search-form'),\n  imgListEl: document.querySelector('.gallery'),\n  loaderEl: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('[data-action=load-more]'),\n};\nlet currentPage = 1;\nlet maxPage = 0;\nlet search;\nconst pageSize = 15;\n// ================================================\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n// ====================================================================================\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  refs.imgListEl.innerHTML = '';\n  currentPage = 1;\n  search = event.target.elements.query.value.trim();\n\n  if (!search) {\n    iziToast.error({\n      title: 'Error',\n      message: 'The search field is empty. Please try again!',\n      position: 'bottomCenter',\n    });\n    hideLoadMoreBtn();\n  } else {\n    try {\n      showLoader();\n      \n      const data = await getImages(search, currentPage);\n      maxPage = Math.ceil(data.totalHits / pageSize);\n      if (!data.hits.length) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'bottomCenter',\n        });\n        hideLoader();\n        hideLoadMoreBtn();\n      } else {\n        const markup = imagesTemplate(data.hits);\n        refs.imgListEl.insertAdjacentHTML('beforeend', markup);\n        lightbox.refresh();\n        hideLoader();\n        checkBtnStatus();\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    refs.formEl.reset();\n  }\n}\n// ===================================================================\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  showLoader();\n  try {\n    const data = await getImages(search, currentPage);\n    const markup = imagesTemplate(data.hits);\n    refs.imgListEl.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  } catch (err) {\n    console.log(err);\n  }\n\n  scroll();\n  hideLoader();\n  checkBtnStatus();\n}\n// ====================== workspacefunction=========================\n//=========================================================================\nfunction showLoader() {\n  refs.loaderEl.classList.remove('is-hidden');\n}\nfunction hideLoader() {\n  refs.loaderEl.classList.add('is-hidden');\n}\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\nfunction hideLoadMoreBtn() {\n  refs.loadMoreBtn.classList.add('is-hidden');\n}\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMoreBtn();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'bottomCenter',\n    });\n  } else {\n    showLoadMoreBtn();\n  }\n}\nfunction scroll() {\n  const height = refs.imgListEL.firstChild.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getImages","search","currentPage","url","params","axios","imgTemplate","data","id","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imagesTemplate","arr","lightbox","SimpleLightbox","refs","maxPage","pageSize","onFormSubmit","onLoadMoreClick","event","iziToast","hideLoadMoreBtn","showLoader","hideLoader","markup","checkBtnStatus","error","err","scroll","showLoadMoreBtn","height"],"mappings":"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"}